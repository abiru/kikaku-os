name = "kikaku-os-api"
main = "apps/api/src/index.ts"
compatibility_date = "2026-01-01"

triggers = { crons = ["0 16 * * *"] }

[observability]
enabled = true

[[d1_databases]]
binding = "DB"
database_name = "ledkikaku-os"
# IMPORTANT: Replace with actual database_id after running:
# wrangler d1 create ledkikaku-os
database_id = "DUMMY_REPLACE"

[[r2_buckets]]
binding = "R2"
bucket_name = "ledkikaku-artifacts"

# NOTE: For local development, these values are overridden by .dev.vars
# For production, DEV_MODE should be "false" and STOREFRONT_BASE_URL should be your actual domain
[vars]
DEV_MODE = "false"
# UPDATE: Replace with your actual production storefront URL after custom domain setup
STOREFRONT_BASE_URL = "https://kikaku-storefront.pages.dev"
SHIPPING_FEE_AMOUNT = "500"
FREE_SHIPPING_THRESHOLD = "5000"
COMPANY_NAME = "株式会社LED企画"
COMPANY_POSTAL_CODE = "123-4567"
COMPANY_ADDRESS = "東京都渋谷区..."
COMPANY_PHONE = "03-1234-5678"
COMPANY_EMAIL = "info@led-kikaku.com"
COMPANY_LOGO_URL = ""
# UPDATE: Replace with your production Stripe publishable key
STRIPE_PUBLISHABLE_KEY = "pk_test_51S0FjT2fSsJwZ14U2f41UmMWMLWLnFNzws5JbmvaNqeLRBTtj2YOFXA2wAmYeWm4G22Mg3RI2QPXXYs1AMSbpUCw001pbrAWk2"

# Secrets (configured via GitHub Actions or `wrangler secret put`):
# - ADMIN_API_KEY
# - STRIPE_SECRET_KEY
# - STRIPE_WEBHOOK_SECRET
# - CLERK_SECRET_KEY
# - SLACK_WEBHOOK_URL (optional)
# - RESEND_API_KEY (optional)
# - SENTRY_DSN (optional)

