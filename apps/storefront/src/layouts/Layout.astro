---
import Container from '../components/Container.astro';
import SiteHeader from '../components/SiteHeader.astro';
import SearchModal from '../components/SearchModal';
import CookieConsent from '../components/CookieConsent';
import NewsletterForm from '../components/NewsletterForm';
import { t } from '../i18n';
import '@fontsource/inter/400.css';
import '@fontsource/inter/500.css';
import '@fontsource/inter/600.css';
import '@fontsource/inter/700.css';
import '@fontsource/inter/900.css';
import '@fontsource/noto-sans-jp/400.css';
import '@fontsource/noto-sans-jp/500.css';
import '@fontsource/noto-sans-jp/600.css';
import '@fontsource/noto-sans-jp/700.css';
import '@fontsource/noto-sans-jp/900.css';
import '../styles/global.css';

interface Props {
	title?: string;
	description?: string;
	image?: string;
	url?: string;
}

const {
	title = 'Led Kikaku Store',
	description = 'Led Kikaku - LED照明製品のオンラインストア',
	image = '/favicon.svg',
	url,
} = Astro.props;
const siteUrl = Astro.site ?? 'https://led-kikaku.com';
const canonicalURL = url ? new URL(url, siteUrl) : new URL(Astro.url.pathname, siteUrl);
const ogImage = new URL(image, siteUrl).href;
---

<!doctype html>
<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<meta name="description" content={description} />
		<meta name="theme-color" content="#ffffff" />
		<meta name="format-detection" content="telephone=no" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="canonical" href={canonicalURL.href} />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>

		<!-- Open Graph -->
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:image" content={ogImage} />
		<meta property="og:url" content={canonicalURL.href} />
		<meta property="og:type" content="website" />
		<meta property="og:site_name" content="Led Kikaku Store" />

		<!-- Twitter Card -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:title" content={title} />
		<meta name="twitter:description" content={description} />
		<meta name="twitter:image" content={ogImage} />

		<slot name="head" />
	</head>
	<body class="font-sans text-[#1d1d1f] antialiased bg-[#f5f5f7]">
		<div class="min-h-screen flex flex-col">
			<SiteHeader currentPath={Astro.url.pathname} />

			<main class="flex-1">
				<slot />
			</main>

			<footer class="bg-[#f5f5f7] border-t border-gray-200 py-10 text-[11px] text-[#86868b]">
				<Container>
					<div class="grid grid-cols-2 gap-8 md:grid-cols-4 lg:grid-cols-5 mb-8">
						<div class="space-y-3">
							<h3 class="font-semibold text-[#1d1d1f]">{t('footer.shopAndLearn')}</h3>
							<ul class="space-y-2">
								<li><a href="/products" class="hover:underline">{t('footer.store')}</a></li>
								<li><a href="#" class="hover:underline">{t('footer.mac')}</a></li>
								<li><a href="#" class="hover:underline">{t('footer.ipad')}</a></li>
							</ul>
						</div>
						<div class="space-y-3">
							<h3 class="font-semibold text-[#1d1d1f]">{t('footer.account')}</h3>
							<ul class="space-y-2">
								<li><a href="#" class="hover:underline">{t('footer.manageYourId')}</a></li>
								<li><a href="#" class="hover:underline">{t('footer.storeAccount')}</a></li>
								<li><a href="#" class="hover:underline">{t('footer.iCloud')}</a></li>
							</ul>
						</div>
						<div class="space-y-3">
							<h3 class="font-semibold text-[#1d1d1f]">{t('footer.values')}</h3>
							<ul class="space-y-2">
								<li><a href="#" class="hover:underline">{t('footer.accessibility')}</a></li>
								<li><a href="#" class="hover:underline">{t('footer.education')}</a></li>
								<li><a href="#" class="hover:underline">{t('footer.environment')}</a></li>
							</ul>
						</div>
						<div class="space-y-3">
							<h3 class="font-semibold text-[#1d1d1f]">{t('footer.about')}</h3>
							<ul class="space-y-2">
								<li><a href="#" class="hover:underline">{t('footer.newsroom')}</a></li>
								<li><a href="#" class="hover:underline">{t('footer.leadership')}</a></li>
								<li><a href="#" class="hover:underline">{t('footer.investors')}</a></li>
							</ul>
						</div>
						<div class="space-y-3 col-span-2 md:col-span-1">
							<h3 class="font-semibold text-[#1d1d1f]">{t('newsletter.title')}</h3>
							<p class="text-[11px] text-[#86868b]">{t('newsletter.description')}</p>
							<NewsletterForm client:load />
						</div>
					</div>

					<div class="pt-4 border-t border-gray-200 flex flex-col md:flex-row justify-between items-center gap-4">
						<p>{t('footer.copyright').replace('{year}', String(new Date().getFullYear()))}</p>
						<div class="flex gap-4">
							<a href="/privacy" class="hover:underline border-r border-gray-300 pr-4 last:border-0 last:pr-0">{t('footer.privacyPolicy')}</a>
							<a href="/terms" class="hover:underline border-r border-gray-300 pr-4 last:border-0 last:pr-0">{t('footer.termsOfUse')}</a>
							<a href="/refund" class="hover:underline border-r border-gray-300 pr-4 last:border-0 last:pr-0">{t('footer.salesAndRefunds')}</a>
							<a href="/contact" class="hover:underline">{t('footer.contact')}</a>
						</div>
					</div>
				</Container>
			</footer>
		</div>

		{/* Search Modal */}
		<SearchModal client:only="react" />

		{/* Cookie Consent Banner */}
		<CookieConsent client:only="react" />
	</body>
</html>
