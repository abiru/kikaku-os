---
import Layout from '../layouts/Layout.astro';
import Container from '../components/Container.astro';
import { t } from '../i18n';

const errorTrackingId = `ERR-${Date.now()}-${Math.random().toString(36).slice(2, 6)}`;
---

<Layout title={`${t('errors.serverErrorCode')} - ${t('errors.serverError')}`}>
	<div class="min-h-[60vh] flex items-center justify-center py-20">
		<Container>
			<div class="text-center max-w-lg mx-auto">
				<p class="text-[80px] md:text-[120px] font-bold text-[#d2d2d7] leading-none select-none">
					{t('errors.serverErrorCode')}
				</p>
				<h1 class="mt-4 text-[28px] md:text-[32px] font-semibold text-primary tracking-tight">
					{t('errors.serverError')}
				</h1>
				<p class="mt-3 text-[17px] text-secondary leading-relaxed">
					{t('errors.serverErrorMessage')}
				</p>
				<p class="mt-4 text-xs text-muted font-mono">
					{t('errors.errorTrackingId', { id: errorTrackingId })}
				</p>
				<p class="mt-2 text-xs text-secondary">
					{t('errors.contactSupport')}{' '}
					<a
						href={`/contact?error_id=${errorTrackingId}`}
						class="text-brand underline hover:text-brand-hover"
					>
						{t('contact.title')}
					</a>
				</p>
				<div class="mt-8 flex flex-col sm:flex-row items-center justify-center gap-3">
					<a
						href="/"
						class="inline-flex items-center gap-2 px-6 py-3 bg-brand text-white text-[15px] font-medium rounded-full hover:bg-brand-hover transition-colors"
					>
						{t('errors.backToHome')}
					</a>
					<button
						id="reload-btn"
						type="button"
						class="inline-flex items-center gap-2 px-6 py-3 border border-[#d2d2d7] text-primary text-[15px] font-medium rounded-full hover:bg-subtle transition-colors"
					>
						{t('errors.reload')}
					</button>
				</div>
			</div>
		</Container>
	</div>

	<script>
		document.getElementById('reload-btn')?.addEventListener('click', () => {
			window.location.reload();
		});
	</script>
</Layout>
