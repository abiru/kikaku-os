---
import Button from '../../components/Button.astro';
import Container from '../../components/Container.astro';
import Layout from '../../layouts/Layout.astro';
---

<Layout title="Checkout Canceled - Led Kikaku">
	<div class="min-h-screen bg-[#f5f5f7] flex items-center">
		<Container class="py-16">
			<div class="mx-auto w-full max-w-xl text-center">
				{/* Cancel Icon */}
				<div class="mx-auto flex h-20 w-20 items-center justify-center rounded-full bg-gray-100">
					<svg class="h-10 w-10 text-[#86868b]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
						<path stroke-linecap="round" stroke-linejoin="round" d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
					</svg>
				</div>

				<h1 class="mt-8 text-4xl font-semibold tracking-tight text-[#1d1d1f] md:text-5xl">
					Checkout canceled.
				</h1>
				<p class="mt-4 text-xl text-[#86868b]">
					No charges were made to your account.
				</p>

				{/* Reassurance Card */}
				<div class="mt-10 rounded-3xl bg-white p-8 text-left shadow-sm">
					<p class="mb-2 text-sm text-[#86868b]">Need help?</p>
					<p class="text-lg text-[#1d1d1f]">
						Your cart items are still saved. You can complete your purchase whenever you are ready, or contact our support team.
					</p>
				</div>

				{/* Next Actions */}
				<div class="mt-10 flex flex-col items-center justify-center gap-4 sm:flex-row">
					<Button href="/cart" size="lg">
						Return to cart
					</Button>
					<Button href="/products" variant="secondary" size="lg">
						Continue shopping
					</Button>
				</div>
			</div>
		</Container>
	</div>
</Layout>

<script>
	// Restore cart from backup if current cart is empty
	if (typeof localStorage !== 'undefined' && typeof sessionStorage !== 'undefined') {
		const currentCart = localStorage.getItem('led-kikaku-cart');
		const backup = sessionStorage.getItem('led-kikaku-cart-backup');

		// Only restore if cart is empty or missing
		if (backup && (!currentCart || currentCart === '{}')) {
			localStorage.setItem('led-kikaku-cart', backup);
		}

		// Clear backup after restoration
		sessionStorage.removeItem('led-kikaku-cart-backup');
	}
</script>
