---
import { Button } from '../../components/catalyst/button';
import Container from '../../components/Container.astro';
import Layout from '../../layouts/Layout.astro';
import { t } from '../../i18n';
---

<Layout title={t('checkout.canceledPageTitle')}>
	<div class="min-h-screen bg-subtle flex items-center">
		<Container class="py-16">
			<div class="mx-auto w-full max-w-xl text-center">
				{/* Cancel Icon */}
				<div class="mx-auto flex h-20 w-20 items-center justify-center rounded-full bg-gray-100">
					<svg class="h-10 w-10 text-secondary" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
						<path stroke-linecap="round" stroke-linejoin="round" d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
					</svg>
				</div>

				<h1 class="mt-8 text-4xl font-semibold tracking-tight text-primary md:text-5xl">
					{t('checkout.canceled')}
				</h1>
				<p class="mt-4 text-xl text-secondary">
					{t('checkout.noCharges')}
				</p>

				{/* Reassurance Card */}
				<div class="mt-10 rounded-3xl bg-white p-8 text-left shadow-sm">
					<p class="mb-2 text-sm text-secondary">{t('checkout.needHelp')}</p>
					<p class="text-lg text-primary">
						{t('checkout.cartItemsSaved')}
					</p>
				</div>

				{/* Next Actions */}
				<div class="mt-10 flex flex-col items-center justify-center gap-4 sm:flex-row">
					<Button href="/cart" color="indigo" client:load>
						{t('cart.returnToCart')}
					</Button>
					<Button href="/products" outline client:load>
						{t('cart.continueShopping')}
					</Button>
				</div>
			</div>
		</Container>
	</div>
</Layout>

<script>
	// Restore cart from backup if current cart is empty
	if (typeof localStorage !== 'undefined' && typeof sessionStorage !== 'undefined') {
		const currentCart = localStorage.getItem('led-kikaku-cart');
		const backup = sessionStorage.getItem('led-kikaku-cart-backup');

		// Only restore if cart is empty or missing
		if (backup && (!currentCart || currentCart === '{}')) {
			localStorage.setItem('led-kikaku-cart', backup);
		}

		// Clear backup after restoration
		sessionStorage.removeItem('led-kikaku-cart-backup');
	}
</script>
