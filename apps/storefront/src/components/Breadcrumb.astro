---
interface BreadcrumbItem {
	label: string;
	href?: string;
}

interface Props {
	items: BreadcrumbItem[];
}

const { items } = Astro.props;

const jsonLd = {
	"@context": "https://schema.org",
	"@type": "BreadcrumbList",
	"itemListElement": items.map((item, index) => ({
		"@type": "ListItem",
		"position": index + 1,
		"name": item.label,
		...(item.href ? { "item": new URL(item.href, Astro.url.origin).href } : {}),
	})),
};
---

<nav aria-label="パンくずリスト" class="mx-auto max-w-7xl px-4 pt-6 sm:px-6 lg:px-8">
	<ol class="flex items-center gap-1.5 text-sm text-gray-500">
		{items.map((item, index) => (
			<li class="flex items-center gap-1.5">
				{index > 0 && (
					<span class="text-gray-300" aria-hidden="true">&gt;</span>
				)}
				{item.href ? (
					<a href={item.href} class="hover:text-gray-900 transition-colors">
						{item.label}
					</a>
				) : (
					<span class="text-gray-900 font-medium" aria-current="page">
						{item.label}
					</span>
				)}
			</li>
		))}
	</ol>
</nav>

<script is:inline define:vars={{ jsonLd }}>
	const script = document.createElement('script');
	script.type = 'application/ld+json';
	script.textContent = JSON.stringify(jsonLd);
	document.head.appendChild(script);
</script>
