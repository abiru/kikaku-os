---
import { Fieldset, Field } from '../catalyst/fieldset';
import { Input } from '../catalyst/input';
import { Select } from '../catalyst/select';

interface Props {
	orderId: string;
}

const { orderId } = Astro.props;
---

{/* Create Refund Modal */}
<div id="create-refund-modal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
	<div class="bg-white rounded-xl shadow-2xl w-full max-w-md">
		<div class="p-6 border-b border-gray-100">
			<h3 class="text-lg font-semibold text-zinc-950">Create Refund</h3>
			<p class="text-sm text-muted mt-1">Order #{orderId}</p>
		</div>
		<form id="create-refund-form" class="p-6 space-y-4">
			<Fieldset client:load>
				<Field>
					<label data-slot="label" class="text-base/6 font-medium text-zinc-950 select-none sm:text-sm/6">Refund Type</label>
					<Select client:load id="refund-type" name="refund_type">
						<option value="full">Full Refund</option>
						<option value="partial">Partial Refund</option>
					</Select>
				</Field>

				<Field>
					<label for="refund-amount" data-slot="label" class="text-base/6 font-medium text-zinc-950 select-none sm:text-sm/6">Amount (JPY)</label>
					<Input client:load
						type="number"
						id="refund-amount"
						name="amount"
						min="1"
						placeholder="Refund amount"
						disabled
					/>
					<p id="refund-max-info" class="text-xs text-muted mt-1"></p>
				</Field>

				<Field>
					<label for="refund-reason" data-slot="label" class="text-base/6 font-medium text-zinc-950 select-none sm:text-sm/6">Reason</label>
					<Input client:load
						type="text"
						id="refund-reason"
						name="reason"
						placeholder="Reason for refund"
						required
					/>
				</Field>
			</Fieldset>

			<div id="refund-error" class="hidden bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm"></div>

			<div class="flex justify-end gap-3 pt-4 border-t border-gray-100">
				<button
					type="button"
					id="cancel-refund-btn"
					class="px-4 py-2 text-sm font-medium text-zinc-950 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"
				>
					Cancel
				</button>
				<button
					type="submit"
					id="submit-refund-btn"
					class="px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors"
				>
					Create Refund
				</button>
			</div>
		</form>
	</div>
</div>

{/* Refund Confirmation Modal */}
<div id="refund-confirm-modal" class="hidden fixed inset-0 bg-black/50 z-[60] flex items-center justify-center p-4">
	<div class="bg-white rounded-xl shadow-2xl w-full max-w-sm p-6 space-y-4">
		<h3 class="text-lg font-semibold text-zinc-950">Confirm Refund</h3>
		<p id="refund-confirm-text" class="text-sm text-muted"></p>
		<div class="flex justify-end gap-3 pt-4 border-t border-gray-100">
			<button
				type="button"
				id="refund-confirm-cancel"
				class="px-4 py-2 text-sm font-medium text-zinc-950 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"
			>
				Cancel
			</button>
			<button
				type="button"
				id="refund-confirm-ok"
				class="px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors"
			>
				Confirm Refund
			</button>
		</div>
	</div>
</div>
