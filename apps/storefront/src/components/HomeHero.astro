---
import { t } from '../i18n';

interface Props {
  title: string;
  subtitle?: string | null;
  image?: string | null;
  imageSmall?: string | null;
  ctaPrimaryText?: string | null;
  ctaPrimaryUrl?: string | null;
  ctaSecondaryText?: string | null;
  ctaSecondaryUrl?: string | null;
}

const {
  title,
  subtitle,
  image,
  imageSmall,
  ctaPrimaryText = t('home.viewProducts'),
  ctaPrimaryUrl = '/products',
  ctaSecondaryText,
  ctaSecondaryUrl
} = Astro.props;

// Use provided images or fallback to transparent placeholder
const bgLarge = image || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMSIgaGVpZ2h0PSIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNmNWY1ZjciLz48L3N2Zz4=';
const bgSmall = imageSmall || image || bgLarge;
---

<section
  class="hero relative min-h-[60vh] md:min-h-[70vh] bg-cover bg-center bg-no-repeat flex items-end"
  style={`--bg-large: url(${bgLarge}); --bg-small: url(${bgSmall});`}
  data-reveal
>
  <div class="hero-scrim w-full px-4 pb-12 pt-40 md:pt-48 text-center">
    <h2
      class="text-2xl font-extrabold tracking-tighter sm:text-5xl text-white"
    >
      {title}
    </h2>
    {subtitle && (
      <p class="mt-4 text-sm sm:text-xl font-semibold text-neutral-200">
        {subtitle}
      </p>
    )}
    <div class="mt-4 flex flex-col sm:flex-row justify-center gap-2">
      {ctaPrimaryText && ctaPrimaryUrl && (
        <a
          href={ctaPrimaryUrl}
          class="w-full sm:w-auto h-12 px-6 py-3 rounded-full bg-brand inline-flex items-center justify-center text-base font-semibold text-white hover:bg-brand-active active:scale-[0.98] focus-visible:outline-none focus-visible:ring-3 focus-visible:ring-brand/30 transition-colors"
        >
          {ctaPrimaryText}
        </a>
      )}
      {ctaSecondaryText && ctaSecondaryUrl && (
        <a
          href={ctaSecondaryUrl}
          class="w-full sm:w-auto h-12 px-6 py-3 rounded-full bg-white/15 backdrop-blur-sm border border-white/25 inline-flex items-center justify-center text-base font-semibold text-white hover:bg-white/25 active:scale-[0.98] focus-visible:outline-none focus-visible:ring-3 focus-visible:ring-white/30 transition-colors"
        >
          {ctaSecondaryText}
        </a>
      )}
    </div>
  </div>
</section>

<style>
  /* 背景切り替え */
  .hero {
    background-image: var(--bg-large);
  }
  @media (max-width: 768px) {
    .hero {
      background-image: var(--bg-small);
    }
  }

  /* ボトムウェイトのダークスクリム */
  .hero-scrim {
    background: linear-gradient(to top, rgba(0, 0, 0, 0.5) 0%, transparent 60%);
  }
</style>
