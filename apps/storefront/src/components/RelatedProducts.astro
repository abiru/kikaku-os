---
import Container from './Container.astro';
import ProductCard from './ui/ProductCard.astro';
import { t } from '../i18n';
import type { Product } from '../lib/types';

interface Props {
	products: Product[];
}

const { products } = Astro.props;
---

{products.length > 0 && (
	<section class="border-t border-neutral-200 bg-subtle py-16" data-reveal>
		<Container>
			<h2 class="text-2xl font-semibold tracking-tight text-primary mb-8">
				{t('product.relatedProducts')}
			</h2>
			<div class="grid grid-cols-2 gap-4 sm:gap-6 lg:grid-cols-4 xl:gap-8" data-reveal-delay="80">
				{products.map((related: Product) => (
					<div data-reveal-child>
						<ProductCard
							id={related.id}
							title={related.title}
							image={related.mainImage || related.image}
							price={related.variants?.[0]?.price?.amount}
							currency={related.variants?.[0]?.price?.currency || 'JPY'}
							variant="compact"
						/>
					</div>
				))}
			</div>
		</Container>
	</section>
)}
