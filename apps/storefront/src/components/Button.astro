---
import type { HTMLAttributes } from 'astro/types';

interface Props extends HTMLAttributes<'button'> {
	variant?: 'primary' | 'dark' | 'secondary' | 'link' | 'outline';
	size?: 'sm' | 'md' | 'lg' | 'icon';
	href?: string;
	type?: 'button' | 'submit' | 'reset';
	class?: string;
	disabled?: boolean;
}

const {
	variant = 'primary',
	size = 'md',
	href,
	type = 'button',
	class: className = '',
	disabled = false,
	...rest
} = Astro.props;

const base =
	'inline-flex items-center justify-center whitespace-nowrap rounded-full font-medium transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50';

const variants = {
	primary: 'bg-zinc-900 text-white hover:bg-zinc-700',
	dark: 'bg-zinc-900 text-white hover:bg-zinc-700',
	secondary: 'bg-zinc-100 text-zinc-900 hover:bg-zinc-200',
	link: 'text-emerald-500 hover:text-emerald-600',
	outline: 'border border-zinc-900/10 bg-transparent text-zinc-700 hover:bg-zinc-50'
};

const sizes = {
	sm: 'h-7 px-3 text-[12px]',
	md: 'h-9 px-5 text-[14px]',
	lg: 'h-11 px-8 text-[17px]', // Larger, typical for "Buy" buttons
    icon: 'h-10 w-10'
};

const classes = `${base} ${variants[variant] ?? variants.primary} ${sizes[size] ?? sizes.md} ${className}`;
---

{href && !disabled ? (
	<a href={href} class={classes} {...rest}>
		<slot />
	</a>
) : (
	<button type={type} class={classes} disabled={disabled} {...rest}>
		<slot />
	</button>
)}
