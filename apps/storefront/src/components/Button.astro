---
import type { HTMLAttributes } from 'astro/types';

interface Props extends HTMLAttributes<'button'> {
	variant?: 'primary' | 'dark' | 'secondary' | 'link' | 'outline';
	size?: 'sm' | 'md' | 'lg' | 'icon';
	href?: string;
	type?: 'button' | 'submit' | 'reset';
	class?: string;
	disabled?: boolean;
}

const {
	variant = 'primary',
	size = 'md',
	href,
	type = 'button',
	class: className = '',
	disabled = false,
	...rest
} = Astro.props;

// Catalyst-style base: Pill shape, smooth font, refined transitions with subtle scale
const base =
	'inline-flex items-center justify-center whitespace-nowrap rounded-full font-medium transition-all duration-300 hover:scale-[1.02] active:scale-[0.98] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50';

const variants = {
	// Indigo for primary actions (Catalyst primary color)
	primary: 'bg-indigo-600 text-white hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600',
	// Standard dark for secondary
	dark: 'bg-zinc-950 text-white hover:bg-zinc-900 dark:bg-zinc-800 dark:hover:bg-zinc-700',
	// Minimalist outline/secondary
	secondary: 'bg-white text-zinc-950 hover:text-indigo-600 shadow-sm dark:bg-zinc-800 dark:text-white dark:hover:text-indigo-400',
	// Ghost link style
	link: 'text-indigo-600 hover:underline underline-offset-4 dark:text-indigo-400',
    outline: 'border border-zinc-200 bg-transparent text-zinc-950 hover:border-zinc-400 dark:border-zinc-700 dark:text-white dark:hover:border-zinc-500'
};

const sizes = {
	sm: 'h-7 px-3 text-[12px]',
	md: 'h-9 px-5 text-[14px]',
	lg: 'h-11 px-8 text-[17px]', // Larger, typical for "Buy" buttons
    icon: 'h-10 w-10'
};

const classes = `${base} ${variants[variant] ?? variants.primary} ${sizes[size] ?? sizes.md} ${className}`;
---

{href && !disabled ? (
	<a href={href} class={classes} {...rest}>
		<slot />
	</a>
) : (
	<button type={type} class={classes} disabled={disabled} {...rest}>
		<slot />
	</button>
)}
